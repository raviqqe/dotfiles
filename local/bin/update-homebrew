#!/bin/sh

set -e

if ! which brew; then
  curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh | bash
  eval $(brew shellenv)
fi

brew update
brew upgrade

if [ -n "$CI" ]; then
  brew install --overwrite go
fi

brew install \
  clang-format \
  comby \
  csvq \
  curl \
  deno \
  gh \
  git \
  go \
  htop \
  imagemagick \
  jq \
  koka \
  ldns \
  lua \
  luarocks \
  neovim \
  node \
  pen-lang/pen/pen \
  pgformatter \
  python \
  rcm \
  ruby \
  rust-analyzer \
  teaxyz/pkgs/tea-cli \
  terraform \
  tig \
  tmux \
  uutils-coreutils \
  uutils-findutils \
  wabt \
  wasmtime \
  watch \
  watchexec \
  yq \
  zig \
  zsh
