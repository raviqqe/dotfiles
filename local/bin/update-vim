#!/bin/sh

set -e

while getopts b option
do
  case $option in
  b)
    batch=true
    ;;
  esac
done

curl -fLo ~/.config/nvim/autoload/plug.vim --create-dirs \
     https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

if which pip2
then
  pip2 install --user --upgrade pynvim
fi

pip3 install --user --upgrade pynvim

gem install neovim
gem update rubocop

npm install -g neovim

nvim ${batch:+--headless} \
     +PlugUpgrade +PlugClean! +PlugUpdate +UpdateRemotePlugins +qall
